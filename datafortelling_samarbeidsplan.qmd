```{python}
# Definer prosjekt og dataset
PROJECT = "pia-prod-85b2"
DATASET = "pia_bigquery_sink_v1_dataset_prod"
```

```{python}
# Hent data om IA-saker
import pandas as pd
from src.utils.dataloader import last_inn_data_statistikk
data_statistikk = last_inn_data_statistikk(
    project=PROJECT,
    dataset=DATASET,
    adm_enheter=pd.read_csv("data/administrative_enheter.csv", dtype=str),
    resultatområde=RESULTATOMRÅDE,
)
```

```{python}
# Hent data om samarbeid
from src.utils.dataloader import last_inn_samarbeid
data_samarbeid = last_inn_samarbeid(
    project=PROJECT,
    dataset=DATASET,
    data_statistikk=data_statistikk,
    resultatområde=RESULTATOMRÅDE,
)
```

```{python}
# Last inn data om samarbeidsplaner
from src.utils.dataloader import last_inn_data_samarbeidsplan
data_samarbeidsplan = last_inn_data_samarbeidsplan(
    project=PROJECT,
    dataset=DATASET,
    data_samarbeid=data_samarbeid,
    resultatområde=RESULTATOMRÅDE,
)
```

{{< include includes/under_arbeid_callout.qmd >}}

# Fordeling av undertemaer i samarbeidsplaner

```{python}
# Filtrerer samarbeidsplaner etter status Aktiv, Avbrutt og Fullført
from src.utils.datahandler import grupper_samarbeid_etter_samarbeid_status
samarbeid_status = ["AKTIV", "AVBRUTT", "FULLFØRT"]
antall_planer_med_innhold, antall_planer_totalt, inkluderte_undertemaer_alle = grupper_samarbeid_etter_samarbeid_status(data_samarbeidsplan, samarbeid_status)
```

Det er totalt `{python} antall_planer_med_innhold` planer som har minst ett inkludert undertema. De er fordelt:

```{python}
# Plotter innhold i samarbeidsplaner etter status på innhold
from src.plots.samarbeidsplaner import plot_samarbeidsplaner_etter_status
plot_samarbeidsplaner_etter_status(data=inkluderte_undertemaer_alle)
```


<!-- 

# TODO: Finn en eller annen måte å vise om det er mange planer som ikke har inkluderte undertemaer i forskjellige statuser. 
Av alle samarbeid med en plan er det x av y planer som har minst ett undertema inkludert.

Av de z uten inkluderte undertemaer.

if antall_planer_totalt-antall_planer_med_innhold > 0:
 -->


