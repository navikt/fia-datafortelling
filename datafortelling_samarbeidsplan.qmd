```{python}
# Definer prosjekt og dataset
PROJECT = "pia-prod-85b2"
DATASET = "pia_bigquery_sink_v1_dataset_prod"
```

```{python}
# Hent data om IA-saker
import pandas as pd
from src.utils.dataloader import last_inn_data_statistikk
data_statistikk = last_inn_data_statistikk(
    project=PROJECT,
    dataset=DATASET,
    adm_enheter=pd.read_csv("data/administrative_enheter.csv", dtype=str),
    resultatområde=RESULTATOMRÅDE,
)
```

```{python}
# Hent data om samarbeid
from src.utils.dataloader import last_inn_samarbeid
data_samarbeid = last_inn_samarbeid(
    project=PROJECT,
    dataset=DATASET,
    data_statistikk=data_statistikk,
    resultatområde=RESULTATOMRÅDE,
)
```

```{python}
# Last inn data om samarbeidsplaner
from src.utils.dataloader import last_inn_data_samarbeidsplan
data_samarbeidsplan = last_inn_data_samarbeidsplan(
    project=PROJECT,
    dataset=DATASET,
    data_samarbeid=data_samarbeid,
    resultatområde=RESULTATOMRÅDE,
)
```

{{< include includes/under_arbeid_callout.qmd >}}



# Innhold i samarbeidsplaner

Denne datafortellingen gir en oversikt over samarbeidsplaner. Det blir ikke inkludert samarbeid som ikke har en tilknyttet samarbeidsplan i visninger nedenfor.

::: {.panel-tabset}

## Alle samarbeid

```{python}
# Filtrerer samarbeidsplaner etter status Aktiv, Avbrutt og Fullført
from src.utils.datahandler import grupper_samarbeid_etter_samarbeid_status
samarbeid_status = ["AKTIV", "AVBRUTT", "FULLFØRT"]
antall_planer_med_innhold, antall_planer_totalt, inkluderte_undertemaer_alle = grupper_samarbeid_etter_samarbeid_status(data_samarbeidsplan, samarbeid_status)
```

For alle samarbeid med en plan er det `{python} antall_planer_med_innhold` av `{python} antall_planer_totalt` planer har noe innhold.

```{python}
# Plotter innhold i samarbeidsplaner etter status på innhold
from src.plots.samarbeidsplaner import plot_samarbeidsplaner_etter_status
plot_samarbeidsplaner_etter_status(data=inkluderte_undertemaer_alle)
```

## Aktive

```{python}
# Filtrerer samarbeidsplaner etter status Aktiv
samarbeid_status = ["AKTIV"]
antall_planer_med_innhold, antall_planer_totalt, inkluderte_undertemaer_aktive = grupper_samarbeid_etter_samarbeid_status(data_samarbeidsplan, samarbeid_status)
```

For aktive samarbeid med en plan er det `{python} antall_planer_med_innhold` av `{python} antall_planer_totalt` planer har noe innhold.


```{python}
# Plotter innhold i samarbeidsplaner etter status på innhold
plot_samarbeidsplaner_etter_status(data=inkluderte_undertemaer_aktive)
```


## Fullførte

```{python}
# Filtrerer samarbeidsplaner etter status Fullført
samarbeid_status = ["FULLFØRT"]
antall_planer_med_innhold, antall_planer_totalt, inkluderte_undertemaer_fullført = grupper_samarbeid_etter_samarbeid_status(data_samarbeidsplan, samarbeid_status)
```

For fullførte samarbeid med en plan er det `{python} antall_planer_med_innhold` av `{python} antall_planer_totalt` planer har noe innhold.


```{python}
# Plotter innhold i samarbeidsplaner etter status på innhold
plot_samarbeidsplaner_etter_status(data=inkluderte_undertemaer_fullført)
```


## Avbrutte

```{python}
# Filtrerer samarbeidsplaner etter status Avbrutt
samarbeid_status = ["AVBRUTT"]
antall_planer_med_innhold, antall_planer_totalt, inkluderte_undertemaer_avbrutt = grupper_samarbeid_etter_samarbeid_status(data_samarbeidsplan, samarbeid_status)
```

For avbrutte samarbeid med en plan er det `{python} antall_planer_med_innhold` av `{python} antall_planer_totalt` planer har noe innhold.

```{python}
# Plotter innhold i samarbeidsplaner etter status på innhold
plot_samarbeidsplaner_etter_status(data=inkluderte_undertemaer_avbrutt)
```


:::



